<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>
		Cloaked Code | Backing up git with Dropbox 	</title>

	<link href='/cloakedcode/css/styles.css' type='text/css' rel='stylesheet' />
	<link rel="stylesheet" type="text/css" href="/cloakedcode/js/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="/cloakedcode/css/prettify.css" />
	
	<link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/CloakedCode" title="Cloaked Code RSS Feed" />

	<script type="text/javascript" src="/cloakedcode/js/jquery-1.4.3.min.js"></script>
        <script type="text/javascript" src="/cloakedcode/js/prettify.js"></script>
        
        <script>
            $(document).ready(function() {
                prettyPrint();
            });
        </script>
<script type="text/javascript">var a=new Date; if(18==a.getDate()&&0==a.getMonth()&&2012==a.getFullYear())window.location="http://sopastrike.com/strike";</script>
</head>

<body>
	<div id='header'>
		<div id='logo'>
			<a href='index.php'><img src='/cloakedcode/imgs/logo.png' alt='Cloaked Code' /></a>
		</div>
		<div id='nav'>
			<ul>
												<li><a href='about.html'>About</a></li>
								|
												<li><a href='code.html'>Code</a></li>
								|
												<li><a href='contact.html'>Contact</a></li>
								|
												<li><a href='portfolio.html'>Portfolio</a></li>
								|
												<li><a href='radiobox.html'>RadioBox</a></li>
								|
												<li><a href='swingfish.html'>SwingFish</a></li>
											</ul>
		</div>
		<div id='theme'>
			<a href='#' onclick="document.cookie = 'theme=plain'; document.location.reload();">Plain</a>
			|
			<a href='#' onclick="document.cookie = 'theme=dark'; document.location.reload();">Dark</a>
		</div>
	</div>

	<div id='content'>
		<h1 class='post-title'>Backing up git with Dropbox</h1>
<div class='date'>Published on March 16, 2011.</div>

<div class='post-content'>
    <p>Three days ago I was trying to force the deletion of some files by using <code>rm -rf</code>. I pressed enter and it spit out some errors mentioning directories a level above where I was. I instantly pressed Ctrl-c, but it was too late. Some files were already gone. My code! In despair I downloaded file recovery programs but neither of them found my files. I settled on rewriting the code from archives I had put in Dropbox, and now, after two days of coding, I'm back to where I was. (I have to admit, I think it's more elegant now than it was.)</p>

<p>This unpleasant happening prompted me to take extreme measures to make sure I don't lose code again. I did two things:</p>

<ol>
<li>Setup a FreeBSD server to push my git repositories to.</li>
<li>Added a post-commit hook to archive git repositories and put them in Dropbox.</li>
</ol>

<p>Here is the post-commit hook. (Note: it excludes the <code>build</code> directory from the archive.)</p>

<div><pre class='prettyprint'>#!/bin/sh

PWD=`pwd`
DIR=`basename "$PWD"`
DROPBOX="/path/to/my/Dropbox/$DIR.tar.gz"

# move above the git repo
cd "$PWD/.."

# tar and zip it
tar -cf "$DIR.tar" --exclude "$DIR/build" "$DIR"
gzip -f "$DIR.tar" &gt; $DROPBOX
</pre></div>
    <div class='post-links'>
                    <a class='next' href='2011-04-06-making-user-input-safe.html'>&laquo; Making User Input Safe</a>
                            <a class='previous' href='2011-03-02-personal-minimalist-design-challenge.html'>Personal Minimalist Design Challenge &raquo;</a>
            </div>
</div>

<hr/>

<div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_identifier = '2011-03-16-backing-up-git-with-dropbox.html';
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://codecabin.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=codecabin">comments powered by Disqus.</a></noscript>
	</div>

	<div id='footer'>
		<p>
			Copyright &copy; 2010 Cloaked Code. <a href="http://feeds.feedburner.com/CloakedCode" title="Subscribe to my RSS feed!"><img src="feed.png" /></a>
		</p>
	</div>
    <!--<a href="http://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets1.github.com/img/abad93f42020b733148435e2cd92ce15c542d320?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_green_007200.png&path=" alt="Fork me on GitHub"></a>-->

	<script type="text/javascript" src="/cloakedcode/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>

	<script type="text/javascript">
			$(document).ready(function() {
				$('a.fancybox').fancybox({ 'titlePosition' : 'over', 'transitionIn' : 'fade' });
			});
 	</script>

        <script type="text/javascript" charset="utf-8">
            var is_ssl = ("https:" == document.location.protocol);
            var asset_host = is_ssl ? "https://s3.amazonaws.com/getsatisfaction.com/" : "http://s3.amazonaws.com/getsatisfaction.com/";
            document.write(unescape("%3Cscript src='" + asset_host + "javascripts/feedback-v2.js' type='text/javascript'%3E%3C/script%3E"));
        </script>

        <script type="text/javascript" charset="utf-8">
            var feedback_widget_options = {};

            feedback_widget_options.display = "overlay";  
            feedback_widget_options.company = "cloaked_code";
            feedback_widget_options.placement = "right";
            feedback_widget_options.color = "#222";
            feedback_widget_options.style = "idea";

            var feedback_widget = new GSFN.feedback_widget(feedback_widget_options);
        </script>

	<script type="text/javascript">
		var pkBaseURL = '/tracker/'; //(("https:" == document.location.protocol) ? "/piwik/" : "/piwik/");
		document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
		</script><script type="text/javascript">
			try {
		var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
			piwikTracker.trackPageView();
		piwikTracker.enableLinkTracking();
		} catch( err ) {}
	</script><noscript><p><img src="/cloakedcode/tracker/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
	
</body>
</html>
<!--- Page took: 0.050518989562988-->
